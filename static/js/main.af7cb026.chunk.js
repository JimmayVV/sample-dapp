(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){e.exports=a(31)},22:function(e,t,a){},27:function(e,t,a){},31:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),l=a.n(o),c=(a(16),a(18),a(20),a(22),a(2)),s=a(3),u=a(5),i=a(4),d=a(6),m=a(1),p=[{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"balance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,name:"user",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"user",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"Withdraw",type:"event"},{constant:!1,inputs:[],name:"deposit",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[{name:"amount",type:"uint256"}],name:"withdraw",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"user",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}],h="0x08bb779f55b6b165349ca8e25645ab66fff3107f",w="0x3430D3FC79e35f33bb69c4a0B4b89bC9Ee107897",v=[{constant:!1,inputs:[{name:"amount",type:"uint256"}],name:"withdraw",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"user",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"balance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"deposit",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,name:"user",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"user",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"Withdraw",type:"event"}],f=(a(27),a(9)),b=a(7),y=a.n(b),E=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).state={events:[],lowestBlock:0},a.interval=null,a.componentDidMount=function(){a.retrieveEvents(),a.interval=setInterval(a.retrieveEvents,5e3)},a.retrieveEvents=function(){a.getDeposits(),a.getWithdrawals()},a.getDeposits=function(){a.props.contract.Deposit({},{fromBlock:a.state.lowestBlock,toBlock:"latest"}).get(function(e,t){e?a.props.flashError("There was an error getting deposits. Please verify MetaMask is connected to the right network"):a.processEvents(t)})},a.getWithdrawals=function(){a.props.contract.Withdraw({},{fromBlock:a.state.lowestBlock,toBlock:"latest"}).get(function(e,t){e?a.props.flashError("There was an error getting deposits. Please verify MetaMask is connected to the right network"):a.processEvents(t)})},a.processEvents=function(e){Array.isArray(e)&&0!==e.length&&(1===e.length&&y.a.findIndex(a.state.events,function(t){return t.blockNumber===e[0].blockNumber})>=0||a.setState(function(t){var a=t.lowestBlock;e.forEach(function(e){e.blockNumber>a&&(a=e.blockNumber)});var n=y.a.uniqWith(Object(f.a)(t.events).concat(Object(f.a)(e)),y.a.isEqual);return n.sort(function(e,t){return t.blockNumber-e.blockNumber}),{lowestBlock:a,events:n}}))},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state.events.slice(0,10);return r.a.createElement(m.Table,{responsive:!0},r.a.createElement(m.TableHead,null,r.a.createElement("tr",null,r.a.createElement("th",null,"Block #"),r.a.createElement("th",null,"Event Type"),r.a.createElement("th",null,"User"),r.a.createElement("th",null,"Amount"))),r.a.createElement(m.TableBody,null,t.map(function(t){return r.a.createElement("tr",{key:"Events".concat(t.blockNumber)},r.a.createElement("td",null,t.blockNumber),r.a.createElement("td",null,t.event),r.a.createElement("td",null,t.args.user),r.a.createElement("td",null,e.props.renderValue(t.args.amount)))})))}}]),t}(n.Component),g=["42","5777"],k=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).state={isConnected:!1,correctNetwork:!1,currentAccount:null,vaultBalance:null,walletBalance:null,depositInput:"",withdrawInput:"",errors:null,success:null,networkId:null},a.validateInterval=null,a.errorTimeout=null,a.successTimeout=null,a.web3=void 0,a.contract=void 0,a.componentDidMount=function(){void 0!==window.web3&&(a.web3=window.web3),a.web3&&a.web3.isConnected()&&(a.setState({isConnected:!0}),a.web3.version.getNetwork(a.validateNetwork),a.validateInterval=setInterval(function(){a.web3.version.getNetwork(a.validateNetwork)},100))},a.convertWeiToEth=function(e){if(e&&a.web3)return a.web3.fromWei(e,"ether")},a.renderValue=function(e){return isNaN(e)&&(e=0),e<1e5?e+" WEI":a.convertWeiToEth(e)+" ETH"},a.validateNetwork=function(e,t){if(e)throw e;var n=g.includes(t),r={correctNetwork:n,networkId:t,currentAccount:a.web3.eth.accounts[0]};if(n){var o="42"===t?v:p,l="42"===t?w:h,c=a.web3.eth.contract(o).at(l);a.getVaultBalance(),a.getWalletBalance(),a.contract=c}else a.contract=null,r.vaultBalance=null,r.walletBalance=null;a.setState(r)},a.getVaultBalance=function(){if(a.web3&&a.contract){var e=a.contract,t=a.state.currentAccount;e.balanceOf(t,function(e,t){e&&a.flashError("Error: "+e),a.setState({vaultBalance:t.toNumber()})})}},a.getWalletBalance=function(){if(a.web3&&a.contract){var e=a.state.currentAccount;a.web3.eth.getBalance(e,function(e,t){e&&a.flashError("Error: "+e),a.setState({walletBalance:t.toNumber()})})}},a.depositMoney=function(){var e=a.state.depositInput;if(a.web3&&a.contract&&e){var t={sender:a.state.currentAccount,value:e};a.contract.deposit(t,function(t,n){t||(a.flashSuccess("Successfully deposited ".concat(a.renderValue(e)," to the vault! Confirmation: ").concat(n)),a.setState({depositInput:""}))})}else a.flashError("Deposit failed")},a.withdrawMoney=function(){var e=a.state.withdrawInput;if(a.web3&&a.contract&&e){var t={sender:a.state.currentAccount};a.contract.withdraw(e,t,function(t,n){t?a.flashError("There was an error withdrawing funds from your vault. Please verify there are sufficient funds"):a.flashSuccess("Successfully withdrew ".concat(a.renderValue(e)," from the vault! Confirmation: ").concat(n)),a.setState({withdrawInput:""})})}else a.flashError("Withdraw failed")},a.flashError=function(e){clearTimeout(a.errorTimeout),a.setState({errors:e}),a.errorTimeout=setTimeout(function(){a.setState({errors:null})},1e4)},a.flashSuccess=function(e){clearTimeout(a.successTimeout),a.setState({success:e}),a.successTimeout=setTimeout(function(){a.setState({success:null})},1e4)},a.depositInputChange=function(e){var t=e.target.value;e.target.validity.valid&&a.setState({depositInput:t})},a.withdrawInputChange=function(e){var t=e.target.value;e.target.validity.valid&&a.setState({withdrawInput:t})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return void 0===this.web3?r.a.createElement("div",null,"Loading..."):r.a.createElement(r.a.Fragment,null,r.a.createElement(m.Navbar,{color:"indigo",dark:!0,expand:"md",className:"mb-3"},r.a.createElement(m.NavbarBrand,{tag:"span"},"Sample Dapp"),r.a.createElement(m.NavbarNav,{right:!0},r.a.createElement(m.Dropdown,null,r.a.createElement(m.DropdownToggle,{nav:!0,caret:!0},"Network Status: ",this.state.correctNetwork?"Successful!":"Unsuccessful"),r.a.createElement(m.DropdownMenu,{right:!0},r.a.createElement(m.DropdownItem,{header:!0},"Connected to Blockchain: ",this.state.isConnected?"Yes":"No"),r.a.createElement(m.DropdownItem,{header:!0},"Kovan Testnet: ",this.state.correctNetwork?"Yes":"No"))),r.a.createElement(m.Dropdown,null,r.a.createElement(m.DropdownToggle,{nav:!0,caret:!0},"Your Account"),r.a.createElement(m.DropdownMenu,{right:!0},r.a.createElement(m.DropdownItem,{header:!0},"Account Number:",r.a.createElement("br",null),this.state.currentAccount),r.a.createElement(m.DropdownItem,{divider:!0}),r.a.createElement(m.DropdownItem,null,"Vault Balance: ",this.renderValue(this.state.vaultBalance)),r.a.createElement(m.DropdownItem,null,"Wallet Balance: ",this.renderValue(this.state.walletBalance)))))),r.a.createElement("div",{className:"container pb-3"},this.state.errors&&r.a.createElement("div",{className:"alert alert-danger"},this.state.errors),this.state.success&&r.a.createElement("div",{className:"alert alert-success"},this.state.success),!this.state.correctNetwork&&r.a.createElement(m.Card,null,r.a.createElement(m.CardBody,null,"Please check your configuration to ensure that MetaMask is configured properly, and is connected to the Kovan network")),this.state.correctNetwork&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Your vault"),r.a.createElement(m.Card,null,r.a.createElement(m.CardBody,null,r.a.createElement("div",{className:"row mb-3"},r.a.createElement("div",{className:"col"},r.a.createElement("h3",null,"Your Vault Balance: ",r.a.createElement("strong",null,this.renderValue(this.state.vaultBalance)))),r.a.createElement("div",{className:"col"},r.a.createElement("h3",null,"Your Wallet Balance: ",r.a.createElement("strong",null,this.renderValue(this.state.walletBalance))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("h5",null,"Deposit to your vault:"),r.a.createElement(m.Input,{type:"tel",label:"Amount to deposit",pattern:"[0-9]*",value:this.state.depositInput,onChange:this.depositInputChange}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement(m.Button,{block:!0,color:"primary",onClick:this.depositMoney},"Deposit")),r.a.createElement("div",{className:"col"},r.a.createElement(m.Button,{block:!0,color:"danger",onClick:function(){return e.setState({depositInput:""})}},"Clear")))),r.a.createElement("div",{className:"col"},r.a.createElement("h5",null,"Withdraw from your vault:"),r.a.createElement(m.Input,{type:"tel",label:"Amount to deposit",pattern:"[0-9]*",value:this.state.withdrawInput,onChange:this.withdrawInputChange}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement(m.Button,{block:!0,color:"warning",onClick:this.withdrawMoney},"Withdraw")),r.a.createElement("div",{className:"col"},r.a.createElement(m.Button,{block:!0,color:"danger",onClick:function(){return e.setState({withdrawInput:""})}},"Clear"))))))),r.a.createElement("h2",{className:"mt-3"},"Recent Transactions"),r.a.createElement(m.Card,null,r.a.createElement(m.CardBody,null,r.a.createElement(E,{contract:this.contract,flashSuccess:this.flashSuccess,flashError:this.flashError,renderValue:this.renderValue}))))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[11,2,1]]]);
//# sourceMappingURL=main.af7cb026.chunk.js.map